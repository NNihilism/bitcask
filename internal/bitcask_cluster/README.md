# bitcask的集群模式/主从模式

## 成员：
1. node
bitcask-cluster中的数据存储节点,目前为主从结构。
节点都对外提供rpc接口进行数据操作
主节点对proxy节点提供服务,进行数据的写操作
从节点对主节点提供服务,进行数据的写操作(即数据的同步)
从节点对proxy节点提供服务,进行数据的读操作

2. proxy
- 负责对外(用户)提供服务,提供rpc接口进行数据的操作
- 内部负责协调多个bitcask节点,并将读写请求进行相应的转发
- 对于读请求,可以根据负载均衡算法进行从节点的选择
- 需要监听node节点的接入请求
- 需要监听主节点防止其下线，若主节点下线，则在从节点中选择一个节点作为新的主节点

## 问题
1. 权限控制？即如何识别rpc请求是否合法
2. 数据一致性问题？
3. 高性能，高可用，高并发如何保证？
4. 压测？